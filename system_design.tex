\chapter{SYSTEM DESIGN}
\label{chap:system_design}

\section{Architectural Overview}
MediVault operates on a three-layer decentralized architecture, combining modern web technologies and robust blockchain frameworks to ensure seamless operation and uncompromising security. This layered structure creates a clear separation of concerns, where each component is responsible for a specific aspect of the system's functionality, from user interaction on the frontend to immutable logic on the backend. This design ensures that the system is not only secure and transparent but also maintainable and scalable.

\section{Layer 1: üåê Frontend (React + MetaMask)}
This is the user-facing layer‚Äîthe interface through which patients and doctors interact directly with the MediVault system. Built using \textbf{React.js} and styled with Material-UI, the frontend provides intuitive dashboards for uploading, viewing, and sharing health records. A crucial element of this layer is the deep integration of \textbf{MetaMask}. This browser extension enables users to connect their Ethereum wallets, providing a secure method for authentication and for signing blockchain transactions directly from the browser. Every significant patient or doctor action, such as adding a new medical record or granting access to a provider, triggers a MetaMask transaction request, ensuring that explicit user authorization is obtained at every step.

\section{Layer 2: ‚öôÔ∏è Middleware (Web3.js)}
The middleware serves as the essential bridge connecting the web interface with the underlying blockchain network. \textbf{Web3.js}, a powerful JavaScript library, acts as the primary communication layer that translates frontend actions into blockchain-readable transactions. When a user submits a form to upload data or toggles their research consent status, Web3.js converts that request into a properly formatted Ethereum transaction. This transaction is then passed to MetaMask to be signed and broadcasted to the network. This layer effectively ensures smooth, real-time synchronization between the user interface and the blockchain ledger, abstracting the complex logic of blockchain interaction and allowing the React frontend to communicate with smart contracts using simple and familiar JavaScript calls.

\section{Layer 3: ‚õìÔ∏è Backend (Smart Contracts + Ganache + Truffle)}
The backend of MediVault is fully decentralized, deliberately avoiding traditional databases to eliminate single points of failure. Instead, it relies entirely on the \textbf{Ethereum blockchain}, deployed locally for development and testing via \textbf{Ganache}. All business logic, rules, and data governance policies are codified within \textbf{Solidity smart contracts}. These contracts are the heart of the system and include three key components: \texttt{PatientData.sol} for handling user registration and personal details, \texttt{SaveData.sol} for storing encrypted medical records, and \texttt{ResearchConsent.sol} for managing research consent and the retrieval of anonymized data.

These contracts define every rule governing data access, encryption validation, and permission changes. The \textbf{Truffle Suite} is used for the entire lifecycle of these contracts, including compilation, deployment, and automated testing. The \textbf{Ganache GUI} provides a private blockchain network where transactions are mined instantly, creating an efficient environment for development and debugging. Together, these components form a robust, end-to-end decentralized system that is both secure and user-friendly.
